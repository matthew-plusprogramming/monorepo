{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Read",
        "hooks": [
          {
            "_source": "metaclaude",
            "_id": "superseded-artifact-warn",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/specs/**/*.md' 'node .claude/scripts/superseded-artifact-warn.mjs {{file}}'"
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "_source": "metaclaude",
            "_id": "json-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*.json' 'node -e \"const f = process.argv[1]; if (!f.includes('\\''tsconfig'\\'')) JSON.parse(require('\\''fs'\\'').readFileSync(f))\" {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "claude-md-drift",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*CLAUDE.md' 'node .claude/scripts/verify-claude-md-base.mjs \"$(dirname {{file}})\" 2>&1 | head -10'"
          },
          {
            "_source": "metaclaude",
            "_id": "manifest-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*manifest.json' 'node .claude/scripts/validate-manifest.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "template-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/templates/*' 'node .claude/scripts/template-validate.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "registry-hash-verify",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/**' 'node .claude/scripts/compute-hashes.mjs --verify 2>&1 | head -5'"
          },
          {
            "_source": "metaclaude",
            "_id": "agent-frontmatter-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/agents/*.md' 'node .claude/scripts/validate-agent-frontmatter.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "skill-frontmatter-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*SKILL.md' 'node .claude/scripts/validate-skill-frontmatter.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "typescript-typecheck",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*.ts,*.tsx' 'node .claude/scripts/workspace-tsc.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "eslint-check",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '*.ts,*.tsx,*.js,*.jsx' 'node .claude/scripts/workspace-eslint.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "spec-schema-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/specs/**/*.md' 'node .claude/scripts/spec-schema-validate.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "spec-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/specs/**/*.md' 'node .claude/scripts/spec-validate.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "registry-artifact-validate",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/registry/artifacts.json' 'node .claude/scripts/registry-artifact-validate.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "progress-heartbeat-check",
            "type": "command",
            "command": "node .claude/scripts/hook-wrapper.mjs '.claude/specs/**' 'node .claude/scripts/progress-heartbeat-check.mjs {{file}}'"
          },
          {
            "_source": "metaclaude",
            "_id": "session-state-validate",
            "type": "command",
            "command": "node .claude/scripts/session-validate.mjs"
          },
          {
            "type": "command",
            "command": "npx prettier --write $CLAUDE_FILE_PATHS 2>/dev/null || true"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "_source": "metaclaude",
            "_id": "session-log",
            "type": "command",
            "command": "echo \"Session ended at $(date)\" >> .claude/context/session.log 2>/dev/null || true"
          },
          {
            "_source": "metaclaude",
            "_id": "session-state-finalize",
            "type": "command",
            "command": "node -e \"const fs=require('fs');const p='.claude/context/session.json';if(fs.existsSync(p)){const s=JSON.parse(fs.readFileSync(p));if(s.active_work){s.phase_checkpoint.checkpoint_state='interrupted';s.updated_at=new Date().toISOString();fs.writeFileSync(p,JSON.stringify(s,null,2))}}\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "command": "echo \"Session ended at $(date)\" >> .claude/context/session.log 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
